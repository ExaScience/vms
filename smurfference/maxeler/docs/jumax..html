<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0061)https://trac.version.fz-juelich.de/reconfigurable/wiki/Public -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><div id="siteheader">
   <center>
   </center>
  </div>


  
    <title>
      jumax
    </title>
      
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
          <link rel="search" href="https://trac.version.fz-juelich.de/reconfigurable/search">
          <link rel="help" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/TracGuide">
          <link rel="alternate" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public?format=txt" type="text/x-trac-wiki" title="Plain Text">
          <link rel="start" href="https://trac.version.fz-juelich.de/reconfigurable/wiki">
          <link rel="stylesheet" href="./jumax_files/trac.css" type="text/css">
          <link rel="stylesheet" href="./jumax_files/wiki.css" type="text/css">
          <link rel="icon" href="https://trac.version.fz-juelich.de/reconfigurable/chrome/common/trac.ico" type="image/x-icon">
    
      <script type="text/javascript" charset="utf-8" src="./jumax_files/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="./jumax_files/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="./jumax_files/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="./jumax_files/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="./jumax_files/folding.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        if ($.ui) { /* is jquery-ui added? */
          $(".trac-datepicker:not([readonly])").prop("autocomplete", "off").datepicker();
          $(".trac-datetimepicker:not([readonly])").prop("autocomplete", "off").datetimepicker();
          $("#main").addClass("trac-nodatetimehint");
        }
        $(".trac-disable").disableSubmit(".trac-disable-determinant");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  
  
    <div id="banner">
      <div id="header">
        <a id="logo" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/TracIni#header_logo-section"><img src="./jumax_files/logo.png" alt=""></a>
      </div>
      <form id="search" action="https://trac.version.fz-juelich.de/reconfigurable/search" method="get">
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.version.fz-juelich.de/reconfigurable/login">Login</a></li><li><a href="https://trac.version.fz-juelich.de/reconfigurable/prefs">Preferences</a></li><li class="last"><a href="https://trac.version.fz-juelich.de/reconfigurable/about">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="last first active"><a href="https://trac.version.fz-juelich.de/reconfigurable/wiki">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="View WikiStart" href="https://trac.version.fz-juelich.de/reconfigurable/wiki">wiki:</a><a class="pathentry" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public" title="View Public">Public</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><a href="https://trac.version.fz-juelich.de/reconfigurable/wiki/WikiStart">Start Page</a></li><li class="last"><a href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public?action=history">History</a></li>
        </ul>
        <hr>
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><h1 id="ReconfigurableComputing:PublicWikiSection">Reconfigurable Computing: Public Wiki Section<a class="anchor" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public#ReconfigurableComputing:PublicWikiSection" title="Link to this section"> ¶</a></h1>
<h2 id="ObtainingAccesstoSystems">Obtaining Access to Systems<a class="anchor" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public#ObtainingAccesstoSystems" title="Link to this section"> ¶</a></h2>
<p>
To obtain an account please proceed as follows:
</p>
<ul><li>Go to our central <a class="ext-link" href="https://dispatch.fz-juelich.de:8812/nic_account_ident/back=/RESOURCES&amp;xxlang=english"><span class="icon">​</span>account request page</a>
and select project "jumax00".
</li><li>After completing all forms you will receive a PDF document comprising of an application form and a usage agreement.
</li><li>Sign both, the application form and the usage agreement, and return a PDF scan to the given address.
</li></ul><h2 id="PRACE-3IPPCPPilotSystemfromMaxeler">PRACE-3IP PCP Pilot System from Maxeler<a class="anchor" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public#PRACE-3IPPCPPilotSystemfromMaxeler" title="Link to this section"> ¶</a></h2>
<p>
For an overview see this <a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/pcp-technical-results-v04-maxeler.pdf">slide deck</a>.
</p>
<h2 id="MinimalTutorial:">Minimal Tutorial:<a class="anchor" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public#MinimalTutorial:" title="Link to this section"> ¶</a></h2>
<p>
<strong>3 parts of the Source code:</strong>
</p>
<ul><li>Java Kernel Code
</li><li>Java Manager Code
</li><li>C/C++ CPU-side code
</li></ul><p>
<strong>assuming following directory structure:</strong>
</p>
<ul><li>$PWD/<a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/StreamFMACpuCode.cpp">StreamFMACpuCode.cpp</a>
</li><li>$PWD/streamfma/<a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/StreamFMAManager.maxj">StreamFMAManager.maxj</a>
</li><li>$PWD/streamfma/<a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/StreamFMAKernel.maxj">StreamFMAKernel.maxj</a>
</li></ul><p>
<strong>
load the environment settings for the newest maxcompiler version (maxcompiler-2017.2.2 as of this writing):</strong>
</p>
<pre class="wiki">. /opt/maxcompiler-2017.2.2/settings.d/MaxCompiler.sh
</pre><p>
Version 2017.2.2 of the Maxeler Tools requires Vivado 2017.1. If compilation for the actual hardware is required, the environment for this version has to be loaded:
</p>
<pre class="wiki">. /home/xilinx/Vivado/Vivado/2017.1/settings64.sh
</pre><p>
<strong>
Load GCC 7</strong>
</p>
<pre class="wiki">. /opt/rh/devtoolset-7/enable
</pre><p>
<strong>Building the JAVA program:</strong>
</p>
<pre class="wiki">maxjc -1.7 -cp /opt/maxcompiler-2017.2.2/lib/Max5Platform.jar:/opt/maxcompiler-2017.2.2/lib/MaxCompiler.jar streamfma/
</pre><p>
<strong>Running the Java program to generate maxfile and slic headers (simulation):</strong>
</p>
<pre class="wiki">java -XX:+UseSerialGC -Xmx2048m -cp /opt/maxcompiler-2017.2.2/lib/MaxCompiler.jar:/opt/maxcompiler-2017.2.2/lib/Max5Platform.jar:. streamfma.StreamFMAManager DFEModel=MAIA maxFileName=StreamFMA target=DFE_SIM  enableMPCX=true
</pre><p>
This will create the maxfile and SLiC header for the program. The parameter DFEModel is mandatory, although it is not used by the Max5LimaManager. DFEModel=LIMA is therefore an invalid value, but DFEModel still has to be set to something, so MAIA is used in this example.
In order to build for actual hardware, specify target=DFE.
</p>
<p>
<strong>Running the Java program to generate maxfile and slic headers (hardware):</strong>
</p>
<pre class="wiki">java -XX:+UseSerialGC -Xmx2048m -cp /opt/maxcompiler-2017.2.2/lib/MaxCompiler.jar:/opt/maxcompiler-2017.2.2/lib/Max5Platform.jar:. streamfma.StreamFMAManager DFEModel=MAIA maxFileName=StreamFMA target=DFE  enableMPCX=true
</pre><p>
This <strong>WILL</strong> take a <strong>VERY long time</strong>, approx. 2 hours even for this very small example. If you just want to test out the DFE version of this tutorial, you can find the prebuilt StreamFMA.max and StreamFMA.h files in /opt/maxeler-StreamFMAtutorial/ on jumax
</p>
<p>
<strong>Copy simulation maxfile and header:</strong>
</p>
<pre class="wiki">mkdir simulation
cp StreamFMA_MAIA_DFE_SIM/results/*{.max,.h} simulation/
</pre><p>
<strong>Copy DFE maxfile and header:</strong>
</p>
<pre class="wiki">mkdir hardware
cp StreamFMA_MAIA_DFE/results/*{.max,.h} hardware/
or
cp /opt/maxeler-StreamFMAtutorial/*{.max,.h} hardware/
</pre><p>
<strong>build the slic object file (simulation):</strong>
</p>
<pre class="wiki">sliccompile simulation/StreamFMA.max
</pre><p>
<strong>build the slic object file (hardware):</strong>
</p>
<pre class="wiki">sliccompile hardware/StreamFMA.max
</pre><p>
<strong>build the binary (simulation):</strong>
</p>
<pre class="wiki">eval g++ -o StreamFMA -Isimulation/  StreamFMACpuCode.cpp slic_StreamFMA.o $(slic-config --cflags --libs)
</pre><p>
<strong>build the binary (hardware):</strong>
</p>
<pre class="wiki">eval g++ -o StreamFMA -Ihardware/  StreamFMACpuCode.cpp slic_StreamFMA.o $(slic-config --cflags --libs)
</pre><p>
(eval is required because of $(slic-config --libs --cflags), this for some reason works only in a Makefile or when using eval)
</p>
<p>
<strong>start the simulation:</strong>
</p>
<pre class="wiki">export MAXELEROSDIR=/opt/maxcompiler-2017.2.2/lib/maxeleros-sim
maxcompilersim -c LIMA -n StreamFMA restart
</pre><p>
<strong>run the binary (simulation):</strong>
</p>
<pre class="wiki">export LD_LIBRARY_PATH=/opt/maxcompiler-2017.2.2/lib/maxeleros-sim/lib:$LD_LIBRARY_PATH
export SLIC_CONF="use_simulation=StreamFMA"
./StreamFMA
</pre><p>
<strong>stop the simulation:</strong>
</p>
<pre class="wiki">maxcompilersim -c LIMA -n StreamFMA stop
</pre><p>
<strong>run the binary (hardware):</strong>
</p>
<p>
You have to ssh onto jumax-cpu for this
</p>
<pre class="wiki">export LD_LIBRARY_PATH=/opt/maxeler/maxeleros/lib:$LD_LIBRARY_PATH
./StreamFMA
</pre></div>
          
          <div class="trac-modifiedby">
            <span><a href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public?action=diff&amp;version=8" title="Version 8 by stepan nassyr">Last modified</a> <a class="timeline" href="https://trac.version.fz-juelich.de/reconfigurable/timeline?from=2018-08-28T14%3A58%3A19%2B02%3A00&amp;precision=second" title="See timeline at 08/28/18 14:58:19">3 weeks ago</a></span>
            <span class="trac-print">Last modified on 08/28/18 14:58:19</span>
          </div>
        
        
      </div>
      
    <div id="attachments" class="collapsed">
        <h3 class="foldable"><a id="no1" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public#no1">Attachments <span class="trac-count">(4)</span></a></h3>
        <div>
          <ul>
            <li>
    <a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/pcp-technical-results-v04-maxeler.pdf" title="View attachment">pcp-technical-results-v04-maxeler.pdf</a><a href="https://trac.version.fz-juelich.de/reconfigurable/raw-attachment/wiki/Public/pcp-technical-results-v04-maxeler.pdf" class="trac-rawlink" title="Download">​</a> (<span title="606277 bytes">592.1 KB</span>) - added by <span class="trac-author">Dirk Pleiter</span> <a class="timeline" href="https://trac.version.fz-juelich.de/reconfigurable/timeline?from=2017-11-21T22%3A04%3A38%2B01%3A00&amp;precision=second" title="See timeline at 11/21/17 22:04:38">10 months ago</a>.
            </li><li>
    <a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/StreamFMAKernel.maxj" title="View attachment">StreamFMAKernel.maxj</a><a href="https://trac.version.fz-juelich.de/reconfigurable/raw-attachment/wiki/Public/StreamFMAKernel.maxj" class="trac-rawlink" title="Download">​</a> (<span title="666 bytes">666 bytes</span>) - added by <span class="trac-author">stepan nassyr</span> <a class="timeline" href="https://trac.version.fz-juelich.de/reconfigurable/timeline?from=2017-12-13T16%3A37%3A13%2B01%3A00&amp;precision=second" title="See timeline at 12/13/17 16:37:13">9 months ago</a>.
              <q>StreamFMA Kernel Code</q>
            </li><li>
    <a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/StreamFMAManager.maxj" title="View attachment">StreamFMAManager.maxj</a><a href="https://trac.version.fz-juelich.de/reconfigurable/raw-attachment/wiki/Public/StreamFMAManager.maxj" class="trac-rawlink" title="Download">​</a> (<span title="833 bytes">833 bytes</span>) - added by <span class="trac-author">stepan nassyr</span> <a class="timeline" href="https://trac.version.fz-juelich.de/reconfigurable/timeline?from=2017-12-13T16%3A37%3A23%2B01%3A00&amp;precision=second" title="See timeline at 12/13/17 16:37:23">9 months ago</a>.
              <q>StreamFMA Manager</q>
            </li><li>
    <a href="https://trac.version.fz-juelich.de/reconfigurable/attachment/wiki/Public/StreamFMACpuCode.cpp" title="View attachment">StreamFMACpuCode.cpp</a><a href="https://trac.version.fz-juelich.de/reconfigurable/raw-attachment/wiki/Public/StreamFMACpuCode.cpp" class="trac-rawlink" title="Download">​</a> (<span title="1867 bytes">1.8 KB</span>) - added by <span class="trac-author">stepan nassyr</span> <a class="timeline" href="https://trac.version.fz-juelich.de/reconfigurable/timeline?from=2017-12-14T15%3A35%3A27%2B01%3A00&amp;precision=second" title="See timeline at 12/14/17 15:35:27">9 months ago</a>.
              <q>StreamFMA CPU code</q>
            </li>
          </ul>
          <p>
            Download all attachments as: <a rel="nofollow" href="https://trac.version.fz-juelich.de/reconfigurable/zip-attachment/wiki/Public/">.zip</a>
          </p>
        </div>
    </div>

    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="https://trac.version.fz-juelich.de/reconfigurable/wiki/Public?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr>
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="./jumax_files/trac_logo_mini.png" height="30" width="107" alt="Trac Powered"></a>
      <p class="left">Powered by <a href="https://trac.version.fz-juelich.de/reconfigurable/about"><strong>Trac 1.2.2</strong></a><br>
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  
</body></html>
